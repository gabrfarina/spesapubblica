{"version":3,"sources":["app.js.es6","dataloader.js.es6","info.js.es6","mapchart.js.es6","dashboard.js.es6","graph.js.es6"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["\"use strict\"\n\nangular\n.module(\"spesapubblica\", [\"ngMaterial\", \"ui.router\", \"googlechart\"])\n.config(function($mdThemingProvider, $mdIconProvider, $locationProvider, $stateProvider, $urlRouterProvider) {\n    // Set up icons\n    $mdIconProvider.defaultIconSet(\"./assets/svg/avatars.svg\", 128)\n        .icon(\"menu\"        , \"./assets/svg/menu.svg\"        , 24)\n        .icon(\"close\"       , \"./assets/svg/close.svg\"       , 24)\n        .icon(\"share\"       , \"./assets/svg/share.svg\"       , 24)\n        .icon(\"assessment\"  , \"./assets/svg/assessment.svg\"  , 24)\n        .icon(\"google_plus\" , \"./assets/svg/google_plus.svg\" , 512)\n        .icon(\"hangouts\"    , \"./assets/svg/hangouts.svg\"    , 512)\n        .icon(\"twitter\"     , \"./assets/svg/twitter.svg\"     , 512)\n        .icon(\"phone\"       , \"./assets/svg/phone.svg\"       , 512);\n\n    // Set up theme\n    $mdThemingProvider.theme('default')\n        .primaryPalette('blue')\n        .accentPalette('grey');\n\n    // Set up routing\n    $locationProvider.html5Mode(false)\n    $urlRouterProvider.otherwise(\"/italia\")\n\n    $stateProvider\n        .state(\"dashboard\", {\n            templateUrl: \"assets/html/dashboard.html\",\n            controller: \"dashboard_ctrl\"\n        })\n        .state(\"dashboard.italia\", {\n            url: \"/italia?g\",\n            templateUrl: \"assets/html/graph.html\",\n            controller: \"graph_ctrl\"\n        })\n        .state(\"dashboard.regione\", {\n            url: \"/regione/{regione_id}?g\",\n            templateUrl: \"assets/html/graph.html\",\n            controller: \"graph_ctrl\"\n        })\n        .state(\"dashboard.provincia\", {\n            url: \"/provincia/{provincia_id}?g\",\n            templateUrl: \"assets/html/graph.html\",\n            controller: \"graph_ctrl\"\n        })\n        .state(\"dashboard.comune\", {\n            url: \"/comune/{comune_id}?g\",\n            templateUrl: \"assets/html/graph.html\",\n            controller: \"graph_ctrl\"\n        });\n})\n\n// See: http://stackoverflow.com/a/16818830/747654\n// google.setOnLoadCallback(function() {\n//     angular.bootstrap(document, ['spesapubblica'])\n// })\n// google.load('visualization', '1', {packages: ['corechart']})\n","\"use strict\"\n\nangular\n.module(\"spesapubblica\")\n.factory(\"dataloader\", ['info', function(info) {\n    var service = {\n        checkboxes: []\n    }\n\n    function name_2_url(obj) {\n        let result = {}\n\n        function fix(s) {\n            let res = \"\"\n\n            for (let i in s) {\n                if (s[i] == \" \") {\n                    res += \"-\"\n                } else {\n                    res += s[i].toLowerCase()\n                }\n            }\n\n            return res\n        }\n\n        for (let key in obj) {\n            result[key] = fix(obj[key])\n        }\n\n        return result\n    }\n\n    function invert_dictionary(dictionary) {\n        let result = {}\n\n        for (let key in dictionary) {\n            result[dictionary[key]] = key\n        }\n\n        return result\n    }\n\n    function add_denomination(denomination, name) {\n        return denomination + name;\n    }\n\n    function add_denomination_to_dictionary(denomination, dict) {\n        var out_dict = {};\n        for (let i in dict) {\n            out_dict[i] = {\n                name: dict[i],\n                name_with_denomination: add_denomination(denomination, dict[i])\n            };\n        }\n        return out_dict;\n    }\n\n    function url_preparator(json_path, what, denomination) {\n        var promise = $.Deferred(function() {\n            d3.json(json_path, function(error, data) {\n                if (error) throw(error);\n\n                let data_url = name_2_url(data)\n                service[what + \"_url_2_id\"] = invert_dictionary(data_url)\n                service[what + \"_name_2_id\"] = invert_dictionary(data)\n\n                service[what + \"_id_2_name\"] = add_denomination_to_dictionary(denomination, data);\n                service[what + \"_id_2_url\"] = data_url\n\n                promise.resolve()\n            })\n        })\n\n        return promise\n    }\n\n    service.regione_prepare_urls = url_preparator(\"data/names/regioni.json\", \"regione\", \"Regione \")\n    service.provincia_prepare_urls = url_preparator(\"data/names/province.json\", \"provincia\", \"Provincia di \")\n    service.comune_prepare_urls = url_preparator(\"data/names/comuni.json\", \"comune\", \"Comune di \")\n\n    function parent_preparator(json_path, what) {\n        var promise = $.Deferred(function() {\n            d3.json(json_path, function(error, data) {\n                if (error) throw(error);\n\n                service[what + \"_parent\"] = data\n\n                promise.resolve()\n            })\n        })\n\n        return promise\n    }\n\n    service.provincia_prepare_parents = parent_preparator(\"data/parents/province.json\", \"provincia\")\n    service.comune_prepare_parents = parent_preparator(\"data/parents/comuni.json\", \"comune\")\n\n    service.prepare_prepare_reports = function() {\n        service.prepare_reports = $.Deferred(function() {\n            d3.json(\"data/reports/\" + info.selected_year + \".json\", function(error, data) {\n                if (error) throw(error);\n\n                service._comune_report = {};\n                service._provincia_report = {};\n                service._regione_report = {};\n\n                $.when(\n                    service.comune_prepare_parents,\n                    service.provincia_prepare_parents\n                ).done(function() {\n                    _.each(data['data'], function(expenses, comune_id) {\n                        var provincia_id = service.comune_parent[comune_id];\n                        var regione_id = service.provincia_parent[provincia_id];\n\n                        for (var expense_category in expenses) {\n                            if (!service._comune_report.hasOwnProperty(comune_id))\n                                service._comune_report[comune_id] = {};\n                            service._comune_report[comune_id][parseInt(expense_category) + 1] = parseFloat(expenses[expense_category]);\n                        }\n\n                        for (var expense_category in expenses) {\n                            if (!service._provincia_report.hasOwnProperty(provincia_id))\n                                service._provincia_report[provincia_id] = {};\n                            if (!service._provincia_report[provincia_id].hasOwnProperty(parseInt(expense_category) + 1))\n                                service._provincia_report[provincia_id][parseInt(expense_category) + 1] = 0;\n                            service._provincia_report[provincia_id][parseInt(expense_category) + 1] += parseFloat(expenses[expense_category]);\n                        }\n\n                        for (var expense_category in expenses) {\n                            if (!service._regione_report.hasOwnProperty(regione_id))\n                                service._regione_report[regione_id] = {};\n                            if (!service._regione_report[regione_id].hasOwnProperty(parseInt(expense_category) + 1))\n                                service._regione_report[regione_id][parseInt(expense_category) + 1] = 0;\n                            service._regione_report[regione_id][parseInt(expense_category) + 1] += parseFloat(expenses[expense_category]);\n                        }\n                    });\n\n                    _.each(data['legend'], function(category_name, category_id) {\n                        service.checkboxes.push({\n                            label: category_name,\n                            id: category_id,\n                            value: false\n                        })\n\n                        info.category_id_2_label[category_id] = category_name\n                    })\n\n                    service.prepare_reports.resolve();\n                });\n            });\n        });\n    }\n\n    service.prepare_prepare_reports()  // load default year\n\n    return service\n}])\n","\"use strict\"\n\nangular\n.module(\"spesapubblica\")\n.factory(\"info\", [function() {\n    console.log(\"caricato info\")\n    var service = {}\n\n    service.selected_year = 2014\n    service.num_categories = 19\n    service.category_id_2_label = {}\n    service.granularity = 1\n    service.search_text = null\n    service.selected_item = null\n    service.radio_selected = \"1\"\n    service.multiple_selection = false\n    service.selected_categories = [\n        service.radio_selected\n    ]\n\n    service.select_all = function() {\n        service.multiple_selection = true\n        service.selected_categories = []\n        for (var i=1; i<=service.num_categories; i++) {\n            service.selected_categories.push(\"\" + i)\n            service.checkboxes[i-1].value = true\n        }\n\n        service.update_map()\n    }\n\n    // FIXME: right now, you must click 2 times for this to work\n    service.select = function(item) {\n        //service.selected_categories.clear()\n        while (service.selected_categories.pop()) {}\n\n        service.selected_categories.push(item)\n\n        service.update_map()\n    }\n\n    service.toggle = function(item) {\n        var idx = service.selected_categories.indexOf(item)\n        if (idx > -1) service.selected_categories.splice(idx, 1)\n        else service.selected_categories.push(item)\n\n        service.update_map()\n    }\n\n    service.exists = function(item) {\n        return service.selected_categories.indexOf(item) > -1\n    }\n\n    return service\n}])\n","\"use strict\"\n\nangular\n.module(\"spesapubblica\")\n.factory(\"mapchart\", ['$rootScope', '$state', 'info', 'dataloader', function($rootScope, $state, info, dataloader) {\n    var me = {}\n\n    /******************************************************************/\n    /* DOM preparation                                                */\n    /******************************************************************/\n\n    $(\"#map\")\n        .height(window.innerHeight - 64 - 40*2);\n\n    // TODO: this part can be called before _id_2_dom_<whatever> has been computed!\n    $(window).resize(_.debounce(function(e) {\n        $(\"#map\")\n            .width($(\"#map\").parent().width())\n            .height(window.innerHeight - 64 - 40*2);\n\n        me._fit_to_viewport()\n    }, 100))\n\n    $rootScope.$watch(function() {\n        return $(\"#map\").width()\n    }, function() {\n        $(window).resize()\n    })\n\n    /******************************************************************/\n    /* Constants                                                      */\n    /******************************************************************/\n\n    me._TRANSITION_DURATION = 500\n\n    /******************************************************************/\n    /* Members                                                        */\n    /******************************************************************/\n\n    me._data = {\n        \"type\": \"Topology\",\n        \"objects\": {},\n        \"arcs\": {}\n    };\n\n    me.current_state = null\n\n    // maps needed to implement dynamic dom manipulation\n    me._id_2_dom_regione = {}\n    me._id_2_dom_provincia = {}\n    me._id_2_dom_comune = {}\n\n    // html/svg-related stuff\n    me._container = \"#map\";\n    me._svg = null;\n    me._g = null;\n\n    // list of interesting IDs of stuff to report when coloring areas\n    me._interesting = []\n\n    // Bounds for Italy geometry\n    me._italy_geometry = null;\n\n    me._tooltip_container = \"#map-tooltip\";\n    me._tooltip = d3.select(me._tooltip_container);\n\n    // D3 related stuff\n    me._zoom = d3.behavior.zoom()\n            .scaleExtent([1, 15])\n            .on('zoom', function() {\n                var t = d3.event.translate;\n                var s = d3.event.scale;\n\n                me._zoom.translate(t);\n                me._g.attr(\"transform\", \"translate(\" + t + \")scale(\" + s + \")\");\n\n                d3.selectAll(\".region\").style(\"stroke-width\", 1/s);\n                d3.selectAll(\".province\").style(\"stroke-width\", .4/s);\n                d3.selectAll(\".comune\").style(\"stroke-width\", .25/s);\n                d3.selectAll(\".graticule\").style(\"stroke-width\", 1/s);\n            });\n\n    // D3 related stuff\n    me._drag = d3.behavior.drag()\n            .on('dragstart', function () {\n                d3.event.sourceEvent.stopPropagation();\n            });\n\n    /******************************************************************/\n    /* Methods                                                        */\n    /******************************************************************/\n\n    me._load_regions = function(callback) {\n        if (me._data.objects.regions !== undefined) {\n            callback()\n        } else {\n            d3.json(\"data/maps/italy-regions.json\", function(error, data) {\n                if (error)\n                    throw(error);\n                me._merge_objects(me._data, data)\n                callback()\n            });\n        }\n    }\n\n    me._load_provinces = function(callback) {\n        if (me._data.objects.provinces !== undefined) {\n            callback()\n        } else {\n            d3.json(\"data/maps/italy-provinces.json\", function(error, data) {\n                if (error)\n                    throw(error);\n                me._merge_objects(me._data, data)\n                callback()\n            });\n        }\n    }\n\n    me._load_comuni = function(callback) {\n        if (me._data.objects.comuni !== undefined) {\n            callback();\n        } else {\n            d3.json(\"data/maps/italy-comuni.json\", function(error, data) {\n                if (error)\n                    throw(error);\n                me._merge_objects(me._data, data)\n                callback();\n            });\n        }\n    }\n\n    // this is needed because _.extend deletes stuff and _.merge (lodash) is too slow\n    me._merge_objects = function(a, b) {\n        if (typeof a === 'object' && typeof b === 'object') {\n            _.each(b, function(value, key) {\n                if (_.has(a, key)) {\n                    me._merge_objects(a[key], value)\n                } else {\n                    a[key] = value\n                }\n            })\n        }\n    }\n\n    me._show_tooltip = function(html) {\n        me._tooltip.html(\"<span>\" + html + \"</span>\");\n        var tooltipW = $(me._tooltip.node()).width() + 2 * 10,      // 10 = padding-left/right\n            tooltipH = $(me._tooltip.node()).height() + 2 * 5 + 7 + 4,  // 5  = padding-top/bottom; 7 = ::after height\n            offsetL = $('#map').offset().left,\n            offsetT = $('#map').offset().top;\n\n        var mouse = d3.mouse(me._svg.node()).map( function(d) { return parseInt(d); } );\n\n        me._tooltip.classed(\"hidden_t\", false)\n                .attr(\"style\", \"left:\"+(mouse[0]+offsetL-tooltipW/2)+\"px;top:\"+(mouse[1]+offsetT-tooltipH)+\"px\");\n    };\n\n    me._hide_tooltip = function() {\n        me._tooltip.classed(\"hidden_t\", true);\n    };\n\n    me._fit_to_viewport = function() {\n        me._width = $(me._container).width();\n        me._height = $(me._container).height();\n\n        me._svg.attr(\"width\", me._width)\n               .style(\"width\", me._width)\n               .attr(\"height\", me._height)\n               .style(\"height\", me._height);\n\n        me._focus_state(me.current_state);\n    }\n\n    me._init = function() {\n        me._width = $(me._container).width();\n        me._height = $(me._container).height();\n\n        if (me._svg)\n            $(me._container).remove('svg');\n\n        // Create main DOM nodes\n        me._svg = d3.select(me._container).append('svg')\n                .attr(\"width\", me._width)\n                .attr(\"height\", me._height);\n\n        var defs = me._svg.append('defs')\n        defs.append('pattern')\n                .attr('id', 'pattern-stripe')\n                .attr('width', '4')\n                .attr('height', '4')\n                .attr('patternUnits', 'userSpaceOnUse')\n                .attr('patternTransform', 'rotate(45)')\n                .append('rect')\n                        .attr('width', '3')\n                        .attr('height', '4')\n                        .attr('transform', 'translate(0,0)')\n                        .attr('fill', 'white')\n        defs.append('mask')\n                .attr('id', 'mask-stripe')\n                .append('rect')\n                        .attr('x', '0')\n                        .attr('y', '0')\n                        .attr('width', '100%')\n                        .attr('height', '100%')\n                        .attr('fill', 'url(#pattern-stripe)')\n\n        me._g = me._svg.append('g');\n\n        me._graticule_g = me._g.append('g')\n                .attr(\"id\", \"graticule\");\n\n        me._comuni_g = me._g.append('g')\n                .attr(\"id\", \"comuni\");\n\n        me._provinces_g = me._g.append('g')\n                .attr(\"id\", \"provinces\");\n\n        me._regions_g = me._g.append('g')\n                .attr(\"id\", \"regions\");\n\n        me._svg\n                .attr('width', me._width)\n                .style('width', me._width)\n                .attr('height', me._height)\n                .style('height', me._height);\n\n        // Create a unit projector\n        me._projector = d3.geo.mercator()\n            .scale(1)\n            .translate([0, 0]);\n\n        // Create a path generator\n        me._path = d3.geo.path()\n            .projection(me._projector);\n        // FIXME: what is the line below?\n        me._tooltip.on('mouseenter', me._hide_tooltip);\n\n        me._wait_for_regioni = me._create_regioni(function(regions) {\n            // Compute the bounds of a feature of interest, then derive scale & translate.\n            var b = me._path.bounds(regions),\n                s = .98 / Math.max((b[1][0] - b[0][0]) / me._width, (b[1][1] - b[0][1]) / me._height),\n                t = [(me._width - s * (b[1][0] + b[0][0])) / 2, (me._height - s * (b[1][1] + b[0][1])) / 2];\n\n            me._italy_geometry = regions;\n\n            // Update the projection to use computed scale & translate.\n            me._projector\n                .scale(s)\n                .translate(t);\n\n            // Create graticule\n            var graticule = d3.geo.graticule()\n                    .extent([[0, 30], [25, 55]]) // Only show some meridians / parallels\n                    .step([2.5, 2.5]);\n\n            // Draw graticule and equator (this is done before drawing the countries because of\n            // the svg drawing order.\n            // FIXME (2/8/15): This is *not* necessary, order is enforced by the groups. Move this code\n            //         to a better place\n            me._graticule_g.insert(\"path\")\n                    .attr(\"class\", \"graticule\")\n                    .attr(\"d\", me._path(graticule()));\n            // -- end of FIXME\n        })\n    }\n\n    me._focus_state = function(state) {\n        if (!state) {\n            return  // FIXME: this is a temporary fix to avoid calling this function too early\n        }\n        switch (state.t) {\n        case \"r\":\n            if (!me._id_2_dom_regione.hasOwnProperty(state.id)) return;  // FIXME: temporary fix\n            me._focus(me._id_2_dom_regione[state.id].geometry, .75);\n            break;\n        case \"p\":\n            if (!me._id_2_dom_provincia.hasOwnProperty(state.id)) return;  // FIXME: temporary fix\n            me._focus(me._id_2_dom_provincia[state.id].geometry, .75);\n            break;\n        case \"c\":\n            if (!me._id_2_dom_comune.hasOwnProperty(state.id)) return;  // FIXME: temporary fix\n            me._focus(me._id_2_dom_comune[state.id].geometry, .75);\n            break;\n        case \"i\":\n            me._wait_for_regioni.done(function() {\n                me._focus(me._italy_geometry, .92)\n            })\n            break;\n        default:\n            break;\n        }\n    }\n\n    me._focus = function(geometry, shrink_factor) {\n        var bounds = me._path.bounds(geometry),\n                dx = bounds[1][0] - bounds[0][0],\n                dy = bounds[1][1] - bounds[0][1],\n                x = (bounds[0][0] + bounds[1][0]) / 2,\n                y = (bounds[0][1] + bounds[1][1]) / 2,\n                scale = shrink_factor / Math.max(dx / me._width, dy / me._height),\n                translate = [me._width / 2 - scale * x, me._height / 2 - scale * y];\n\n        me._svg.transition()\n                .duration(me._TRANSITION_DURATION)\n                .call(me._zoom.translate(translate).scale(scale).event);\n    }\n\n    // me._gray_out_regions = function(region_id) {\n    //     return\n    //     _.each(me._regions_g, function(node) {\n    //         d3.select(node).style(\"fill\", \"gray\")\n    //     });\n    // }\n\n    me._create_regioni = function(first) {\n        var promise = $.Deferred()\n        var regioni_ids = []\n\n        me._load_regions(function() {\n            me._data.arcs.length = Object.keys(me._data.arcs).length\n            var su = {\n                regions: topojson.feature(me._data, me._data.objects.regions)\n            };\n\n            // callback\n            if (first !== undefined) {\n                first(su.regions)\n            }\n\n            var todo = su.regions.features.length\n            var done = 0\n            _.each(su.regions.features, function(feature) {\n                regioni_ids.push(feature.properties.id)\n\n                if (!me._id_2_dom_regione[feature.properties.id]) {\n\n                    me._id_2_dom_regione[feature.properties.id] = {\n                        \"dom_node\": me._regions_g.append(\"path\")\n                            .datum(feature)\n                            .attr(\"class\", \"region\")\n                            .attr(\"d\", me._path(feature))\n                            .call(me._drag)\n                            .on(\"click\", function() {\n                                // change URL\n                                $state.go(\"dashboard.regione\", {\"regione_id\": dataloader.regione_id_2_url[feature.properties.id]})\n                            })\n                            .on(\"mousemove\", function() {\n                                me._show_tooltip(dataloader.regione_id_2_name[feature.properties.id].name_with_denomination);\n                            })\n                            .on(\"mouseleave\", function() {\n                                me._hide_tooltip()\n                            }),\n                        \"geometry\": feature.geometry\n                    }\n\n                    // notify\n                    done++\n                    promise.notify(done / todo)\n                }\n            });\n\n            promise.resolve(regioni_ids)\n        })\n\n        return promise\n    }\n\n    me._create_province = function(region_id) {\n        var promise = $.Deferred()\n        var province_ids = []\n\n        // a region was clicked: download all provinces and then load the provinces in the specified region\n        me._load_provinces(function() {\n\n            var su = {\n                provinces: topojson.feature(me._data, me._data.objects.provinces)\n            };\n\n            var todo = su.provinces.features.length\n            var done = 0\n            _.every(su.provinces.features, function(feature) {\n                // only provinces in the region\n                if (dataloader.provincia_parent[feature.properties.id] == region_id) {\n                    province_ids.push(feature.properties.id)\n\n                    if (!me._id_2_dom_provincia[feature.properties.id]) {\n\n                        me._id_2_dom_provincia[feature.properties.id] = {\n                            \"dom_node\": me._provinces_g.append(\"path\")\n                                .datum(feature)\n                                .attr(\"class\", \"province\")\n                                .attr(\"d\", me._path(feature))\n                                .call(me._drag)\n                                .on(\"click\", function() {\n                                    // change URL\n                                    $state.go(\"dashboard.provincia\", {\"provincia_id\": dataloader.provincia_id_2_url[feature.properties.id]})\n                                })\n                                .on(\"mousemove\", function() {\n                                    me._show_tooltip(dataloader.provincia_id_2_name[feature.properties.id].name_with_denomination);\n                                })\n                                .on(\"mouseleave\", function() {\n                                    me._hide_tooltip()\n                                }),\n                            \"geometry\": feature.geometry\n                        }\n\n                        // notify\n                        done++\n                        promise.notify(done / todo)\n                    }\n                }\n\n                // if we are still supposed to do this, continue\n                if (info.granularity >= 2); else {\n                    console.error(\"Ehm... \" + info.granularity + \">= 2\")\n                }\n                return true\n                return info.granularity >= 2\n            });\n\n            promise.resolve(province_ids)\n        })\n\n        return promise\n    }\n\n    me._create_comuni = function(provincia_id) {\n        var promise = $.Deferred()\n        var comune_ids = []\n\n        me._load_comuni(function() {\n            var su = {\n                comuni: topojson.feature(me._data, me._data.objects.comuni)\n            };\n\n            var todo = su.comuni.features.length\n            var done = 0\n            _.every(su.comuni.features, function(feature) {\n                // only comuni in the provincia (now it's the time of lunch)\n\n                // FIXME: the + here is a temporary workaround (it should be parsed as int in layers.js)\n                feature.properties.id = +feature.properties.id\n\n                if (dataloader.comune_parent[feature.properties.id] == provincia_id) {\n                    comune_ids.push(feature.properties.id)\n\n                    if (!me._id_2_dom_comune[feature.properties.id]) {\n\n                        me._id_2_dom_comune[feature.properties.id] = {\n                            \"dom_node\": me._comuni_g.append(\"path\")\n                                .datum(feature.properties)\n                                .attr(\"class\", \"comune\")\n                                .attr(\"d\", me._path(feature))\n                                .call(me._drag)\n                                .on(\"click\", function(d) {\n                                    // change URL\n                                    // FIXME: temporary + have to be removed (must be fixed in layers.js)\n                                    $state.go(\"dashboard.comune\", {\"comune_id\": dataloader.comune_id_2_url[+d.id]})\n                                })\n                                .on(\"mousemove\", function(d) {\n                                    me._show_tooltip(dataloader.comune_id_2_name[d.id].name_with_denomination);\n                                })\n                                .on(\"mouseleave\", function(d) {\n                                    me._hide_tooltip()\n                                }),\n                            \"geometry\": feature.geometry\n                        }\n\n                        // notify\n                        done++\n                        promise.notify(done / todo)\n                    }\n                }\n\n                // if we are still supposed to do this, continue\n                if (info.granularity >= 3); else {\n                    console.error(\"Ehm... \" + info.granularity + \">= 3\")\n                }\n                return true\n                return info.granularity >= 3\n            });\n\n            promise.resolve(comune_ids)\n        })\n\n        return promise\n    }\n\n    me._remove_province = function(province_id) {\n        if (me._id_2_dom_provincia[province_id]) {\n            me._id_2_dom_provincia[province_id].dom_node.remove();\n            delete me._id_2_dom_provincia[province_id];\n\n            // console.log(\"Removed province \" + province_id + \" (\" + dataloader.provincia_id_2_name[province_id].name + \")\");\n            if (me._id_2_dom_provincia[province_id])\n                throw province_id;\n        }\n    };\n\n    me._remove_comune = function(comune_id) {\n        if (me._id_2_dom_comune[comune_id]) {\n            me._id_2_dom_comune[comune_id].dom_node.remove();\n            delete me._id_2_dom_comune[comune_id];\n        }\n    };\n\n    me._get_parent_state = function(state) {\n        switch (state.t) {\n        case \"c\":\n            return {\n                t: \"p\",\n                id: dataloader.comune_parent[state.id]\n            }\n        case \"p\":\n            return {\n                t: \"r\",\n                id: dataloader.provincia_parent[state.id]\n            }\n        default:\n            return {\n                t: \"i\"\n            }\n        }\n    }\n\n    me.reload_state = function() {\n        me.change_state(me.current_state)\n    }\n\n    /* Change state\n\n    new_state is an object which can have two properties:\n      - t: type of the state, possible values:\n            * \"i\" = italia\n            * \"r\" = regione\n            * \"p\" = provincia\n            * \"c\" = comune\n      - id: id of the state\n    */\n    me.change_state = function(new_state) {\n        // TODO(later): fare in modo che avvenga una transizione, che non faccia \"sparire\" le cose eliminate\n        var parent_state, parent_parent_state\n\n        if (new_state.t === \"i\") {\n            $(\"#reset-button\").hide()\n        } else {\n            $(\"#reset-button\").show()\n        }\n\n        switch (new_state.t) {\n        case \"i\":\n            // TODO 1: elimina tutte le province (+figli) dal DOM\n            //   NOTE (2/8/15): skip TODO 1\n            // TODO 2: resetta lo zoom a tutta la mappa\n\n            //$(\".region\").show()\n\n            // Create regions (always needed)\n            me._wait_for_regioni.done(function(r_ids) {\n                // 1\n                $(\".province\").remove()\n                me._id_2_dom_provincia = {}\n                $(\".comune\").remove()\n                me._id_2_dom_comune = {}\n                // 2\n                me._focus_state(new_state)\n\n                if (info.granularity > 1) {\n                    var province_promises = []\n                    var comuni_promises = []\n\n                    // load province\n                    for (var i in r_ids) {\n                        var promise = me._create_province(r_ids[i])\n                        province_promises.push(promise)\n                        if (info.granularity > 2) {\n                            promise.done(function(p_ids) {\n                                for (var i in p_ids) {\n                                    // load comuni\n                                    comuni_promises.push(me._create_comuni(p_ids[i]))\n                                }\n                            })\n                        }\n                    }\n\n                    $.when.apply($, province_promises).done(function() {\n                        if (info.granularity > 2) {\n                            $.when.apply($, comuni_promises).done(function() {\n                                // colorize comuni\n                                me._default_restyle(3)\n                            })\n                        } else {\n                            // colorize province\n                            me._default_restyle(2)\n                        }\n                    })\n                } else {\n                    // colorize regioni\n                    me._default_restyle(1)\n                }\n            })\n\n            break\n        case \"r\":\n            // TODO 1: elimina province (+figli) eccetto quelle della regione new_state.id\n            // TODO 2: elimina (se necessario) i figli delle province della regione new_state.id\n            // TODO 3: crea (se necessario) le province della regione new_state.id\n            // TODO 4: zoom nella regione new_state.id\n\n            // 1+2+3\n            d3.selectAll(\".comune\").each(function(d) {\n                me._remove_comune(d.id)\n            })\n\n            d3.selectAll(\".province\").each(function(d) {\n                if (dataloader.provincia_parent[d.properties.id] != new_state.id) {\n                    me._remove_province(d.properties.id);\n                }\n            });\n\n            // old version\n            // $(\".province\").remove()\n            // me._id_2_dom_provincia = {}\n            // $(\".comune\").remove()\n            // me._id_2_dom_comune = {}\n\n            var promise = me._create_province(new_state.id)\n            var comuni_promises = []\n\n            var loaded = $.Deferred()\n\n            // TODO: check what happens below if the granularity suddenly changes\n\n            promise.done(function(p_ids) {\n                if (info.granularity > 2) {\n                    for (var i in p_ids) {\n                        comuni_promises.push(me._create_comuni(p_ids[i]))\n                    }\n\n                    $.when.apply($, comuni_promises).done(function() {\n                        loaded.resolve()\n                    })\n                } else {\n                    loaded.resolve()\n                }\n            })\n\n            loaded.done(function() {\n                // 4\n                me._focus_state(new_state)\n\n                // colorize\n                me._default_restyle(info.granularity)\n\n                // grey out regions\n                $(\".region\").css(\"fill\", \"gray\")\n                // make the interesting region transparent\n                $(me._id_2_dom_regione[new_state.id].dom_node[0]).css(\"fill\", \"none\")\n            })\n\n            break\n        case \"p\":\n            // TODO 1: trova la regione R che contiene la provincia new_state.id\n            // TODO 2: elimina province eccetto quelle della regione R\n            // TODO 3: crea (se necessario) le province della regione R\n            // TODO 4: crea (se necessario) i comuni della provincia new_state.id\n            // TODO 5: zoom nella provincia new_state.id\n\n            // 1\n            parent_state = me._get_parent_state(new_state)\n\n            // 2+3\n            // FIXME: most of the time it's not necessary to remove all provinces, we should exploit the case when we have the provinces already loaded\n            //        (it's necessary if you reach another province via URL, while you're on a completely different region)\n            //        (it's not necessary if you click on a province, since all the provinces in that region have been loaded)\n            //        maybe it should be done on case \"r\" also, but it's very rare that a user enters a region with the provinces already loaded\n            // NOTE (2/8/15): I think I have fixed it. If you agree, just delete FIXME + this NOTE. The old code is down here for reference:\n            //        $(\".province\").remove()\n\n            d3.selectAll(\".province\").each(function(d) {\n                if (dataloader.provincia_parent[d.properties.id] != parent_state.id) {\n                    me._remove_province(d.properties.id);\n                }\n            });\n\n            me._create_province(parent_state.id).done(function() {\n                // 4\n                d3.selectAll(\".comune\").each(function(d) {\n                    if (dataloader.comune_parent[d.id] != new_state.id) {\n                        me._remove_comune(d.id);\n                    }\n                });\n\n                me._create_comuni(new_state.id).done(function() {\n                    // 5\n                    me._focus_state(new_state)\n\n                    // colorize comuni\n                    me._default_restyle(3)\n\n                    // grey out stuff\n                    $(\".region, .province\").css(\"fill\", \"gray\")\n\n                    // leave a \"hole\" in the interesting region + province\n                    $(me._id_2_dom_regione[parent_state.id].dom_node[0]).css(\"fill\", \"none\")\n                    $(me._id_2_dom_provincia[new_state.id].dom_node[0]).css(\"fill\", \"none\")\n                })\n            })\n\n            break\n        case \"c\":\n            // TODO 1: trova la provincia P che contiene il comune new_state.id\n            // TODO 2: trova la regione R che contiene la provincia P\n            // TODO 3: elimina province eccetto quelle della regione R\n            // TODO 4: crea (se necessario) le province della regione R\n            // TODO 5: elimina comuni eccetto quelli della provincia P\n            // TODO 6: crea (se necessario) i comuni della provincia P\n            // TODO 7: zoom nel comune new_state.id\n\n            // 1\n            parent_state = me._get_parent_state(new_state)\n            // 2\n            parent_parent_state = me._get_parent_state(parent_state)\n\n            // 3+4\n            // NOTE (2/8/15): see above\n            d3.selectAll(\".province\").each(function(d) {\n                if (dataloader.provincia_parent[d.id] != parent_parent_state.id)\n                    me._remove_province(d.id);\n            });\n\n            me._create_province(parent_parent_state.id).done(function() {\n                // 5+6\n\n                // NOTE (2/8/15): see above. Old code down here:\n                //        $(\".comune\").remove()\n                d3.selectAll(\".comune\").each(function(d) {\n                    if (dataloader.comune_parent[d.id] != parent_state.id)\n                        me._remove_comune(d.id);\n                });\n\n                me._create_comuni(parent_state.id).done(function() {\n                    // 7\n                    me._focus_state(new_state)\n\n                    // colorize comuni\n                    me._default_restyle(3)\n\n                    $(\".region, .province\")\n                        .css(\"fill\", \"gray\")\n\n                    // leave a \"hole\" in the interesting region + province\n                    $(me._id_2_dom_regione[parent_parent_state.id].dom_node[0]).css(\"fill\", \"none\")\n                    $(me._id_2_dom_provincia[parent_state.id].dom_node[0]).css(\"fill\", \"none\")\n                })\n            })\n\n            break\n        }\n\n        me.current_state = new_state\n    }\n\n\n    me.change_to_parent_state = function() {\n        var p = me._get_parent_state(me.current_state)\n        switch (p.t) {\n        case \"i\":\n            $state.go(\"dashboard.italia\")\n            break\n        case \"r\":\n            $state.go(\"dashboard.regione\", {\"regione_id\": dataloader.regione_id_2_url[p.id]})\n            break\n        case \"p\":\n            $state.go(\"dashboard.provincia\", {\"provincia_id\": dataloader.provincia_id_2_url[p.id]})\n            break\n        case \"c\":\n            $state.go(\"dashboard.comune\", {\"comune_id\": dataloader.comune_id_2_url[p.id]})\n            break\n        }\n    }\n\n\n    me._default_restyle = function(granularity) {\n        var s = me._zoom.scale();\n\n        $(me._svg.node()).find('.region')\n                .css('fill', 'none')\n                .css('stroke', 'white')\n                .css('stroke-width', 1/s);\n        $(me._svg.node()).find('.province')\n                .css('fill', 'none')\n                .css('stroke', 'white')\n                .css('stroke-width', .6/Math.sqrt(s));\n        $(me._svg.node()).find('.comune')\n                .css('fill', 'none')\n                .css('stroke', 'white')\n                .css('stroke-width', .4/Math.sqrt(s));\n\n        $(\".region, .province, .comune\")\n            .on('mousemove', function() {\n                $(this).css(\"opacity\", \"0.7\");\n            })\n            .on('mouseleave', function() {\n                var that = this;\n                setTimeout(function() {\n                    $(that).css(\"opacity\", \"1\");\n                }, 50);\n            });\n\n        me.update_colors(granularity)\n    };\n\n    me.update_colors = function(granularity) {\n        console.log(\"Multiple: \" + info.multiple_selection)\n        if (info.multiple_selection) {\n            if (info.selected_categories.length > 0) {\n                me.interesting = info.selected_categories\n            } else {\n                return  // check this case\n            }\n        } else {\n            me.interesting = [info.radio_selected]\n        }\n\n        console.log(JSON.stringify(me.interesting))\n\n        dataloader.prepare_reports.done(function() {\n            if (granularity == 3) {\n                me._style_comuni();\n            } else if (granularity == 2) {\n                me._style_provinces();\n            } else if (granularity == 1) {\n                me._style_regions();\n            }\n        })\n    }\n\n    var rnd_color = function() {\n        return \"hsl(\" + Math.floor(240 - Math.random() * 60) + \",80%,40%)\";\n    }\n\n    me._aggregate_data = function(datatype, id, expenses) {\n        var s = 0;\n        for (var i in expenses) {\n            if (dataloader[\"_\" + datatype + \"_report\"].hasOwnProperty(id)\n                    && dataloader[\"_\" + datatype + \"_report\"][id].hasOwnProperty(expenses[i]))\n                s += parseFloat(dataloader[\"_\" + datatype + \"_report\"][id][expenses[i]]);\n            else\n                return -1;\n        }\n        return s;\n    }\n\n    me._interpolate_color = function(value, mean, margin) {\n        if (1 == 1) {\n            var hue = 200, saturation = \"100%\", light;\n\n            if (margin == 0) margin = .1;\n\n            var light_high = 30, light_low = 70;\n\n            if (value < mean - margin) light = light_low;\n            else if (value > mean + margin) light = light_high;\n            else light = Math.min(light_low, light_high) + Math.abs(light_high - light_low) * (1 - (value - mean + margin) / (2 * margin));\n\n            return \"hsl(\" + hue + \",\" + saturation + \",\" + light + \"%)\";\n        } else {\n            var hue = 0, saturation = \"70%\", lightness = \"50%\";\n\n            if (margin == 0) margin = .1;\n\n            var hue_high = 0, hue_low = 120;\n\n            if (value < mean - margin) hue = hue_low, saturation = \"100%\", lightness = \"60%\";\n            else if (value > mean + margin) hue = hue_high, saturation = \"100%\", lightness = \"60%\";\n            else hue = Math.min(hue_low, hue_high) + Math.abs(hue_high - hue_low) * (1 - (value - mean + margin) / (2 * margin));\n\n            return \"hsl(\" + hue + \",\" + saturation + \",\" + lightness + \")\";\n        }\n    }\n\n    me._style_comuni = function() {\n        me._pie_data.rows = []  // clear\n\n        var totals = Array.apply(null, Array(info.num_categories + 1)).map(Number.prototype.valueOf, 0)  // in ES6: new Array(size).fill(0)\n\n        var expenses = []\n        d3.selectAll(\".comune\").each(function(d) {\n            var expense = me._aggregate_data(\"comune\", d.id, me.interesting)\n            if (expense > 0)\n                expenses.push(expense);\n\n            for (var i=1; i<=info.num_categories; i++) {\n                var tmp = me._aggregate_data(\"comune\", d.id, [i])\n                if (tmp > 0) {\n                    totals[i] += tmp\n                }\n            }\n        })\n\n        for (var i=1; i<=info.num_categories; i++) {\n            me._pie_data.rows.push({\n                c: [\n                    {v: info.category_id_2_label[i]},\n                    {v: totals[i]}\n                ]\n            })\n        }\n\n        var mean = math.mean(expenses);\n        var std = math.std(expenses);\n        var margin = Math.min(mean, 3.0 * std);\n        d3.selectAll(\".comune\").each(function(d) {\n            var expense = me._aggregate_data(\"comune\", d.id, me.interesting)\n            // console.log(\"Comune \" + d.id + \": \" + expense);\n\n            if (expense > 0)\n                d3.select(this).style(\"fill\", me._interpolate_color(expense, mean, margin));\n            else\n                d3.select(this).style(\"fill\", \"rgb(145, 145, 145)\");\n        });\n    }\n\n    me._style_provinces = function() {\n        me._pie_data.rows = []  // clear\n\n        var expenses = []\n        _.each(dataloader._provincia_report, function(v, province_id) {\n            var expense = me._aggregate_data(\"provincia\", province_id, me.interesting)\n            if (expense > 0)\n                expenses.push(expense)\n        })\n\n        var mean = math.mean(expenses);\n        var std = math.std(expenses);\n        var margin = Math.min(mean, 3.0 * std);\n\n        var totals = Array.apply(null, Array(info.num_categories + 1)).map(Number.prototype.valueOf, 0)  // in ES6: new Array(size).fill(0)\n\n        d3.selectAll(\".province\").each(function(d) {\n            var expense = me._aggregate_data(\"provincia\", d.properties.id, me.interesting)\n            // console.log(\"Provincia \" + d.properties.id + \": \" + expense);\n\n            if (expense > 0)\n                d3.select(this).style(\"fill\", me._interpolate_color(expense, mean, margin));\n            else\n                d3.select(this).style(\"fill\", \"rgb(145, 145, 145)\");\n\n            for (var i=1; i<=info.num_categories; i++) {\n                var tmp = me._aggregate_data(\"provincia\", d.properties.id, [i])\n                if (tmp > 0) {\n                    totals[i] += tmp\n                }\n            }\n        })\n\n        for (var i=1; i<=info.num_categories; i++) {\n            me._pie_data.rows.push({\n                c: [\n                    {v: info.category_id_2_label[i]},\n                    {v: totals[i]}\n                ]\n            })\n        }\n    }\n\n    me._style_regions = function() {\n        me._pie_data.rows = []  // clear\n\n        var expenses = []\n        _.each(dataloader._regione_report, function(v, region_id) {\n            var expense = me._aggregate_data(\"regione\", region_id, me.interesting)\n            if (expense > 0)\n                expenses.push(expense)\n        })\n\n        var mean = math.mean(expenses);\n        var std = math.std(expenses);\n        var margin = Math.min(mean, 3.0 * std);\n\n        var totals = Array.apply(null, Array(info.num_categories + 1)).map(Number.prototype.valueOf, 0)  // in ES6: new Array(size).fill(0)\n\n        d3.selectAll(\".region\").each(function(d) {\n            var expense = me._aggregate_data(\"regione\", d.properties.id, me.interesting)\n            // console.log(\"Regione \" + d.properties.id + \": \" + expense);\n\n            if (expense > 0)\n                d3.select(this).style(\"fill\", me._interpolate_color(expense, mean, margin));\n            else\n                d3.select(this).style(\"fill\", \"rgb(145, 145, 145)\");\n\n            for (var i=1; i<=info.num_categories; i++) {\n                var tmp = me._aggregate_data(\"regione\", d.properties.id, [i])\n                if (tmp > 0) {\n                    totals[i] += tmp\n                }\n            }\n        })\n\n        for (var i=1; i<=info.num_categories; i++) {\n            me._pie_data.rows.push({\n                c: [\n                    {v: info.category_id_2_label[i]},\n                    {v: totals[i]}\n                ]\n            })\n        }\n    }\n\n    /******************************************************************/\n    /* Constructor code                                               */\n    /******************************************************************/\n\n    me._init();\n\n    return me\n}])\n","\"use strict\"\n\nangular\n.module(\"spesapubblica\")\n.controller(\"dashboard_ctrl\", [\n        \"$scope\", \"$state\", \"$mdDialog\", \"mapchart\", \"info\", \"dataloader\",\n        function($scope, $state, $mdDialog, mapchart, info, dataloader) {\n    // maybe this could be done in a better way\n    dataloader.prepare_reports.done(function() {\n        info.checkboxes = dataloader.checkboxes\n        info.update_map = function() {\n            mapchart.update_colors(info.granularity)\n        }\n        $scope.$apply()\n    })\n\n    $scope.change_year = function() {\n        dataloader.prepare_prepare_reports()  // reload new data\n        mapchart.update_colors(info.granularity)\n    }\n\n    $scope.chartObject = {};\n\n    $scope.chartObject.type = \"PieChart\";\n    $scope.chartObject.data = {\n        \"cols\": [\n            {id: \"t\", label: \"Tipo di spesa\", type: \"string\"},\n            {id: \"s\", label: \"Valore della spesa\", type: \"number\"}\n        ],\n        \"rows\": []\n    }\n\n    $scope.chartObject.options = {\n        // 'title': 'How Much Pizza I Ate Last Night'\n    }\n\n    // make the pie available to mapchart\n    mapchart._pie_data = $scope.chartObject.data\n\n    // make info stuff available to the template\n    $scope.info = info\n\n    $scope.open_tutorial = $scope.open_authors = function(ev) {\n        $mdDialog.show({\n//            controller: DialogController,\n            templateUrl: 'assets/html/tutorial.html',\n            parent: angular.element(document.body),\n            targetEvent: ev,\n            clickOutsideToClose:true\n        }).then(function(answer) {\n            $scope.status = 'You said the information was \"' + answer + '\".';\n        }, function() {\n            $scope.status = 'You cancelled the dialog.';\n        });\n    }\n\n    $scope.update_granularity = function(new_granularity) {\n        info.granularity = new_granularity\n\n        // minor fix (to avoid displaying a redundant ?g=x in the url)\n        if (($state.current.name === \"dashboard.italia\" && new_granularity === 1)\n                || ($state.current.name === \"dashboard.regione\" && new_granularity === 2)\n                || ($state.current.name === \"dashboard.provincia\" && new_granularity === 3)\n                || ($state.current.name === \"dashboard.comune\" && new_granularity === 3)) {\n            // setting it to null causes to not display it\n            new_granularity = null\n        }\n\n        $state.go(\".\", {g: new_granularity})\n    }\n\n    $scope.get_matches = function(text) {\n        function add_results_from_dictionary(dictionary, results, type, limit) {\n            var added = 0;\n            for (let i in dictionary) {\n                if (added == limit)\n                    return;\n\n                if (dictionary[i].name_with_denomination.toLowerCase().indexOf(text.toLowerCase()) >= 0) {\n                    results.push({\n                        \"display\": dictionary[i].name_with_denomination,\n                        \"t\": type,\n                        \"id\": i\n                    });\n                    added += 1\n                }\n            }\n        }\n\n        let results = []\n        add_results_from_dictionary(dataloader.regione_id_2_name, results, \"r\", 10)\n        add_results_from_dictionary(dataloader.provincia_id_2_name, results, \"p\", 10)\n        add_results_from_dictionary(dataloader.comune_id_2_name, results, \"c\", 10)\n\n        return results\n    }\n\n    $scope.go_to_searched = function() {\n        if (!info.selected_item) {\n            console.log(\"info.selected_item is invalid\")\n            return\n        }\n        console.log(\"info.selected_item is valid\")\n        switch (info.selected_item.t) {\n        case \"r\":\n            $state.go(\"dashboard.regione\", {regione_id: dataloader.regione_id_2_url[info.selected_item.id]})\n            break\n        case \"p\":\n            $state.go(\"dashboard.provincia\", {provincia_id: dataloader.provincia_id_2_url[info.selected_item.id]})\n            break\n        case \"c\":\n            $state.go(\"dashboard.comune\", {comune_id: dataloader.comune_id_2_url[info.selected_item.id]})\n        }\n    }\n\n    $scope.go_to_parent = function() {\n        mapchart.change_to_parent_state()\n    }\n}])\n","\"use strict\"\n\nangular\n.module(\"spesapubblica\")\n.controller(\"graph_ctrl\", [\n        \"$scope\", \"$state\", \"$stateParams\", \"info\", \"mapchart\", \"dataloader\",\n        function($scope, $state, $stateParams, info, mapchart, dataloader) {\n    // pass \"info\" object to the scope\n    $scope.info = info\n\n    // TODO: maybe, after clearing search_text, we can focus somewhere\n    //       (at the moment, if you hit \"send\", the floating label stays up)\n    info.search_text = \"\"\n\n    if ($stateParams.regione_id !== undefined) {\n        // regione\n        $.when(dataloader.regione_prepare_urls).done(function() {\n            let regione_id = dataloader.regione_url_2_id[$stateParams.regione_id]\n            info.location = dataloader.regione_id_2_name[regione_id].name_with_denomination\n\n            if ($stateParams.g === undefined) {\n                info.granularity = 2\n            } else {\n                var g = parseInt($stateParams.g)\n                if (g < 2) {\n                    $state.go(\"dashboard.italia\")\n                }\n                info.granularity = g\n            }\n\n            mapchart.change_state({\n                t: \"r\",\n                id: regione_id\n            });\n        })\n    } else if ($stateParams.provincia_id !== undefined) {\n        // provincia\n        $.when(dataloader.provincia_prepare_urls, dataloader.provincia_prepare_parents).done(function() {\n            let provincia_id = dataloader.provincia_url_2_id[$stateParams.provincia_id]\n            info.location = dataloader.provincia_id_2_name[provincia_id].name_with_denomination\n\n            if ($stateParams.g === undefined) {\n                info.granularity = 3\n            } else {\n                var g = parseInt($stateParams.g)\n                if (g < 2) {\n                    $state.go(\"dashboard.italia\")\n                } else if (g < 3) {\n                    var id = dataloader.provincia_parent[provincia_id]\n                    $state.go(\"dashboard.regione\", {regione_id: dataloader.regione_id_2_url[id]})\n                }\n                info.granularity = 3\n            }\n\n            mapchart.change_state({\n                t: \"p\",\n                id: provincia_id\n            });\n        })\n    } else if ($stateParams.comune_id !== undefined) {\n        // comune\n        $.when(dataloader.comune_prepare_urls, dataloader.provincia_prepare_parents, dataloader.comune_prepare_parents).done(function() {\n            let comune_id = dataloader.comune_url_2_id[$stateParams.comune_id]\n            info.location = dataloader.comune_id_2_name[comune_id].name_with_denomination\n\n            if ($stateParams.g === undefined) {\n                info.granularity = 3\n            } else {\n                var g = parseInt($stateParams.g)\n                if (g < 2) {\n                    $state.go(\"dashboard.italia\")\n                } else if (g < 3) {\n                    var id = dataloader.provincia_parent[dataloader.comune_parent[comune_id]]\n                    $state.go(\"dashboard.regione\", {regione_id: dataloader.regione_id_2_url[id]})\n                }\n                info.granularity = g\n            }\n\n            mapchart.change_state({\n                t: \"c\",\n                id: comune_id\n            });\n        })\n    } else {\n        // italia\n        info.location = \"Italia\"\n\n        if ($stateParams.g === undefined) {\n            info.granularity = 1\n        } else {\n            info.granularity = parseInt($stateParams.g)\n        }\n\n        mapchart.change_state({\n            t: \"i\"\n        });\n    }\n}])\n"],"sourceRoot":"/source/"}